<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0" />
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <title>瓦里奥制造礼物</title>
  <link href="https://lib.baomitu.com/element-ui/2.15.2/theme-chalk/index.css" rel="stylesheet">
</head>

<body id="root">
  <div id="app">
    <el-form :model="item" size="mini">
      <el-form-item label="礼物">
        <el-select v-model.number="item.gift_id" filterable clearable placeholder="请选择">
          <el-option v-for="gift in gifts" :key="gift.id" :label="gift.name" :value="gift.id">
            <span style="float: left">{{ gift.id }}</span>
            <span style="float: right; color: #8492a6; font-size: 13px">{{ gift.name }}</span>
          </el-option>
        </el-select>
      </el-form-item>
      <el-form-item label="人物">
        <el-checkbox-group v-model="item.names" @change="item.gift_id = null">
          <el-checkbox-button v-for="name in names" :label="name" :key="name">{{ name }}</el-checkbox-button>
        </el-checkbox-group>
      </el-form-item>
    </el-form>
    <el-row>
      <el-table :data="rows" border size="mini" style="width: 100%" max-height="600">
        <el-table-column type="expand">
          <template slot-scope="props">
            <span>{{ props.row.names }}</span>
          </template>
        </el-table-column>
        <el-table-column label="id" prop="id" sortable></el-table-column>
        <el-table-column label="name" prop="name" sortable></el-table-column>
        <el-table-column prop="star" label="star" sortable column-key="star"
          :filters="[{text: '1', value: 1}, {text: '2', value: 2}, {text: '3', value: 3}, {text: '4', value: 4}, {text: '5', value: 5}]"
          :filter-method="filterHandler">
        </el-table-column>
      </el-table>
    </el-row>
  </div>

  <script src="https://lib.baomitu.com/lodash.js/4.13.1/lodash.min.js"></script>

  <script src="https://lib.baomitu.com/vue/2.6.14/vue.min.js"></script>
  <script src="https://lib.baomitu.com/element-ui/2.15.2/index.js"></script>
  <script>
    const MY_DATA = [{ "id": 100, "name": "巨大陨石", "star": 5, "names": "安娜,艾希莉,奥布伦,小红魔" }, { "id": 99, "name": "太空船", "star": 5, "names": "德利博,斯皮茨,九瓦特,奥布伦" }, { "id": 98, "name": "合体战士", "star": 5, "names": "库利凯特,十八瓦特,九瓦特,佩尼" }, { "id": 97, "name": "巨无霸客机", "star": 5, "names": "十八瓦特,小红魔,佩尼,蹦罗" }, { "id": 96, "name": "豪华客轮", "star": 5, "names": "麦克,卡特,五瓦特,露露" }, { "id": 95, "name": "无人岛", "star": 5, "names": "库利凯特,卡特,安娜,艾希莉" }, { "id": 94, "name": "高尔夫球场", "star": 5, "names": "德利博,克莱格,吉米,曼提斯" }, { "id": 93, "name": "公司大楼", "star": 5, "names": "瓦力欧,斯皮茨,麦克,曼提斯" }, { "id": 92, "name": "黄金马桶", "star": 5, "names": "瓦力欧,莫娜,克莱格,露露" }, { "id": 91, "name": "华丽皇冠", "star": 5, "names": "莫娜,吉米,五瓦特,蹦罗" }, { "id": 90, "name": "大型起重机", "star": 4, "names": "十八瓦特,德利博,斯皮茨,九瓦特" }, { "id": 89, "name": "直升机", "star": 4, "names": "十八瓦特,九瓦特,小红魔,佩尼" }, { "id": 88, "name": "游艇", "star": 4, "names": "卡特,吉米,五瓦特,曼提斯" }, { "id": 87, "name": "红色宝石", "star": 4, "names": "艾希莉,五瓦特,小红魔,露露" }, { "id": 86, "name": "金蛋", "star": 4, "names": "瓦力欧,库利凯特,曼提斯,蹦罗" }, { "id": 85, "name": "金卡", "star": 4, "names": "瓦力欧,斯皮茨,麦克,五瓦特" }, { "id": 84, "name": "画作", "star": 4, "names": "克莱格,麦克,安娜,佩尼" }, { "id": 83, "name": "名贵的壶", "star": 4, "names": "德利博,奥布伦,曼提斯,露露" }, { "id": 82, "name": "小型货车", "star": 4, "names": "十八瓦特,德利博,斯皮茨,卡特" }, { "id": 81, "name": "健美选手雕像", "star": 4, "names": "瓦力欧,库利凯特,莫娜,克莱格" }, { "id": 80, "name": "曼德拉草", "star": 4, "names": "莫娜,安娜,艾希莉,蹦罗" }, { "id": 79, "name": "鲔鱼", "star": 4, "names": "库利凯特,斯皮茨,卡特,安娜" }, { "id": 78, "name": "新式马桶", "star": 4, "names": "瓦力欧,克莱格,五瓦特,露露" }, { "id": 77, "name": "陶俑", "star": 4, "names": "库利凯特,莫娜,艾希莉,奥布伦" }, { "id": 76, "name": "阿尔卑斯长号", "star": 4, "names": "艾希莉,奥布伦,小红魔,蹦罗" }, { "id": 75, "name": "结婚礼服", "star": 4, "names": "莫娜,安娜,露露,佩尼" }, { "id": 74, "name": "流水造景", "star": 4, "names": "德利博,奥布伦,曼提斯,蹦罗" }, { "id": 73, "name": "笔记本电脑", "star": 4, "names": "克莱格,九瓦特,吉米,佩尼" }, { "id": 72, "name": "公路单车", "star": 4, "names": "九瓦特,麦克,卡特,吉米" }, { "id": 71, "name": "电吉他", "star": 4, "names": "十八瓦特,麦克,吉米,小红魔" }, { "id": 70, "name": "数码相机", "star": 3, "names": "麦克,五瓦特,露露,佩尼" }, { "id": 69, "name": "手机", "star": 3, "names": "瓦力欧,九瓦特,麦克,吉米" }, { "id": 68, "name": "大王花", "star": 3, "names": "安娜,艾希莉,奥布伦,蹦罗" }, { "id": 67, "name": "电风扇", "star": 3, "names": "斯皮茨,克莱格,奥布伦,五瓦特" }, { "id": 66, "name": "哑铃", "star": 3, "names": "库利凯特,德利博,克莱格,卡特" }, { "id": 65, "name": "球棒", "star": 3, "names": "卡特,小红魔,曼提斯,露露" }, { "id": 64, "name": "拳击手套", "star": 3, "names": "库利凯特,莫娜,吉米,小红魔" }, { "id": 63, "name": "头戴式耳机", "star": 3, "names": "瓦力欧,九瓦特,奥布伦,小红魔" }, { "id": 62, "name": "气垫鞋", "star": 3, "names": "库利凯特,莫娜,九瓦特,曼提斯" }, { "id": 61, "name": "雪花肉", "star": 3, "names": "瓦力欧,德利博,艾希莉,小红魔" }, { "id": 60, "name": "寿司", "star": 3, "names": "十八瓦特,斯皮茨,艾希莉,露露" }, { "id": 59, "name": "松茸", "star": 3, "names": "瓦力欧,艾希莉,曼提斯,露露" }, { "id": 58, "name": "下午茶", "star": 3, "names": "莫娜,克莱格,吉米,五瓦特" }, { "id": 57, "name": "人孔盖", "star": 3, "names": "莫娜,麦克,曼提斯,佩尼" }, { "id": 56, "name": "生日蛋糕", "star": 3, "names": "十八瓦特,九瓦特,安娜,艾希莉" }, { "id": 55, "name": "橄榄球", "star": 3, "names": "库利凯特,十八瓦特,德利博,卡特" }, { "id": 54, "name": "足球", "star": 3, "names": "十八瓦特,斯皮茨,卡特,小红魔" }, { "id": 53, "name": "保龄球瓶", "star": 3, "names": "十八瓦特,九瓦特,奥布伦,佩尼" }, { "id": 52, "name": "带骨肉", "star": 3, "names": "库利凯特,德利博,露露,蹦罗" }, { "id": 51, "name": "俄罗斯套娃", "star": 3, "names": "安娜,五瓦特,佩尼,蹦罗" }, { "id": 50, "name": "墨镜", "star": 3, "names": "莫娜,德利博,克莱格,吉米" }, { "id": 49, "name": "仙人掌", "star": 3, "names": "斯皮茨,安娜,五瓦特,蹦罗" }, { "id": 48, "name": "小猪存钱罐", "star": 3, "names": "瓦力欧,麦克,奥布伦,蹦罗" }, { "id": 47, "name": "胡子目录", "star": 3, "names": "斯皮茨,克莱格,吉米,曼提斯" }, { "id": 46, "name": "视力检查棒子", "star": 3, "names": "麦克,卡特,安娜,佩尼" }, { "id": 45, "name": "白色盘子", "star": 2, "names": "麦克,五瓦特,小红魔,蹦罗" }, { "id": 44, "name": "打气筒", "star": 2, "names": "德利博,斯皮茨,九瓦特,佩尼" }, { "id": 43, "name": "鼻子眼镜", "star": 2, "names": "十八瓦特,莫娜,吉米,奥布伦" }, { "id": 42, "name": "袜子", "star": 2, "names": "莫娜,斯皮茨,五瓦特,曼提斯" }, { "id": 41, "name": "鸭子玩具", "star": 2, "names": "卡特,安娜,奥布伦,蹦罗" }, { "id": 40, "name": "咖喱饭", "star": 2, "names": "瓦力欧,十八瓦特,九瓦特,露露" }, { "id": 39, "name": "拉面", "star": 2, "names": "瓦力欧,库利凯特,德利博,斯皮茨" }, { "id": 38, "name": "披萨", "star": 2, "names": "瓦力欧,莫娜,德利博,艾希莉" }, { "id": 37, "name": "汉堡", "star": 2, "names": "十八瓦特,九瓦特,艾希莉,奥布伦" }, { "id": 36, "name": "蛋糕卷", "star": 2, "names": "克莱格,卡特,安娜,五瓦特" }, { "id": 35, "name": "水龙头手把", "star": 2, "names": "克莱格,麦克,奥布伦,佩尼" }, { "id": 34, "name": "纸相扑游戏", "star": 2, "names": "库利凯特,麦克,曼提斯,露露" }, { "id": 33, "name": "磁铁", "star": 2, "names": "斯皮茨,克莱格,麦克,佩尼" }, { "id": 32, "name": "玫瑰", "star": 2, "names": "克莱格,安娜,吉米,小红魔" }, { "id": 31, "name": "布丁", "star": 2, "names": "十八瓦特,九瓦特,安娜,小红魔" }, { "id": 30, "name": "章鱼造型香肠", "star": 2, "names": "十八瓦特,德利博,九瓦特,卡特" }, { "id": 29, "name": "软盘", "star": 2, "names": "瓦力欧,克莱格,奥布伦,佩尼" }, { "id": 28, "name": "甜甜圈", "star": 2, "names": "莫娜,安娜,艾希莉,五瓦特" }, { "id": 27, "name": "冰淇淋", "star": 2, "names": "吉米,小红魔,曼提斯,露露" }, { "id": 26, "name": "肉包", "star": 2, "names": "库利凯特,德利博,艾希莉,蹦罗" }, { "id": 25, "name": "综合果汁", "star": 2, "names": "莫娜,麦克,吉米,佩尼" }, { "id": 24, "name": "葡萄", "star": 2, "names": "艾希莉,五瓦特,曼提斯,蹦罗" }, { "id": 23, "name": "香蕉", "star": 2, "names": "库利凯特,安娜,露露,蹦罗" }, { "id": 22, "name": "大蒜", "star": 2, "names": "瓦力欧,吉米,小红魔,曼提斯" }, { "id": 21, "name": "牛奶", "star": 2, "names": "库利凯特,斯皮茨,卡特,露露" }, { "id": 20, "name": "牙刷", "star": 1, "names": "莫娜,克莱格,麦克,吉米" }, { "id": 19, "name": "卫生纸", "star": 1, "names": "瓦力欧,克莱格,奥布伦,佩尼" }, { "id": 18, "name": "不明钥匙", "star": 1, "names": "瓦力欧,库利凯特,奥布伦,露露" }, { "id": 17, "name": "不明螺丝", "star": 1, "names": "十八瓦特,斯皮茨,麦克,佩尼" }, { "id": 16, "name": "电灯泡", "star": 1, "names": "德利博,斯皮茨,九瓦特,五瓦特" }, { "id": 15, "name": "塑胶塞子", "star": 1, "names": "斯皮茨,麦克,五瓦特,曼提斯" }, { "id": 14, "name": "大葱", "star": 1, "names": "库利凯特,卡特,曼提斯,蹦罗" }, { "id": 13, "name": "水煮蛋", "star": 1, "names": "德利博,斯皮茨,小红魔,蹦罗" }, { "id": 12, "name": "拉炮", "star": 1, "names": "库利凯特,十八瓦特,九瓦特,小红魔" }, { "id": 11, "name": "糖果", "star": 1, "names": "瓦力欧,卡特,安娜,露露" }, { "id": 10, "name": "腰果", "star": 1, "names": "九瓦特,安娜,露露,蹦罗" }, { "id": 9, "name": "丝带", "star": 1, "names": "德利博,卡特,安娜,艾希莉" }, { "id": 8, "name": "护发帽", "star": 1, "names": "德利博,吉米,奥布伦,五瓦特" }, { "id": 7, "name": "塑胶袋", "star": 1, "names": "莫娜,吉米,艾希莉,五瓦特" }, { "id": 6, "name": "空罐子", "star": 1, "names": "库利凯特,十八瓦特,克莱格,佩尼" }, { "id": 5, "name": "罐子拉环", "star": 1, "names": "十八瓦特,九瓦特,麦克,佩尼" }, { "id": 4, "name": "苹果核", "star": 1, "names": "艾希莉,奥布伦,小红魔,蹦罗" }, { "id": 3, "name": "蜘蛛网", "star": 1, "names": "瓦力欧,莫娜,艾希莉,小红魔" }, { "id": 2, "name": "蒲公英的细毛", "star": 1, "names": "卡特,安娜,曼提斯,露露" }, { "id": 1, "name": "毛发", "star": 1, "names": "莫娜,克莱格,吉米,曼提斯" }];

    const CHARACTERS = [
      '瓦力欧',
      '库利凯特',
      '十八瓦特',
      '莫娜',
      '德利博',
      '斯皮茨',
      '克莱格',
      '九瓦特',
      '麦克',
      '卡特',
      '安娜',
      '吉米',
      '艾希莉',
      '奥布伦',
      '五瓦特',
      '小红魔',
      '曼提斯',
      '露露',
      '佩尼',
      '蹦罗',
    ];

    new Vue({
      el: '#app',
      data: {
        names: CHARACTERS,
        item: {
          names: [],
          gift_id: null,
        },
      },
      computed: {
        gifts() {
          const filter = this.item;
          return _.chain(MY_DATA)
            .filter(t => filter.names.length === 0 || _.intersection(t.names.split(','), filter.names).length > 0)
            .value();
        },
        rows() {
          const filter = this.item;
          const rows = _.chain(this.gifts)
            .filter(t => !filter.gift_id || filter.gift_id === t.id)
            .value();
          return rows;
        },
      },
      methods: {
        filterHandler(value, row, column) {
          const property = column['property'];
          return row[property] === value;
        },
      },
    });
  </script>
</body>

</html>
